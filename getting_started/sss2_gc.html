<!DOCTYPE html><head><meta charset="UTF-8"><title>Group Constant File Generation With | Moltres</title><link href="../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../css/devel_moose.css" type="text/css" rel="stylesheet"></link><link href="../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><link href="../css/civet_moose.css" type="text/css" rel="stylesheet"></link><link href="../css/moltres.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../contrib/jquery/jquery.min.js"></script></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="../index.html" class="left moose-logo hide-on-med-and-down" id="home-button">Moltres</a><a href="https://github.com/arfc/moltres" class="right"><img src="../media/framework/github-logo.png" class="github-mark"></img><img src="../media/framework/github-mark.png" class="github-logo"></img></a><ul class="right hide-on-med-and-down"><li><a href="#!" class="dropdown-trigger" data-target="fd62f51b-71e0-4c1f-8c8e-6c9fbc8ae615" data-constrainWidth="false">Getting Started<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="9732d5c6-5d97-44b9-9de9-921c9d5b9bfb" data-constrainWidth="false">Documentation<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="423831ab-3030-4e67-bcba-61172e1395da" data-constrainWidth="false">Help<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="../citing.html">Citing</a></li></ul><a href="#" class="sidenav-trigger" data-target="61289929-2bd5-4ed1-888e-2519a714c23e"><i class="material-icons">menu</i></a><ul class="sidenav" id="61289929-2bd5-4ed1-888e-2519a714c23e"><li><a href="#!" class="dropdown-trigger" data-target="b2ebff47-a241-4df5-b717-a9eed41f1cc3" data-constrainWidth="false">Getting Started<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="b8af1f90-cd8a-462c-84d9-7503376f6091" data-constrainWidth="false">Documentation<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="01329192-5c0a-4725-a68a-b50fd0c74cee" data-constrainWidth="false">Help<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="../citing.html">Citing</a></li></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div><ul class="dropdown-content" id="fd62f51b-71e0-4c1f-8c8e-6c9fbc8ae615"><li><a href="installation.html">Install Moltres</a></li><li><a href="tutorials.html">Tutorials</a></li></ul><ul class="dropdown-content" id="9732d5c6-5d97-44b9-9de9-921c9d5b9bfb"><li><a href="../syntax/index.html">Moltres Syntax</a></li><li><a href="https://mooseframework.inl.gov/source/index.html">MOOSE Syntax</a></li><li><a href="../doxygen/classes.html">Moltres Doxygen</a></li><li><a href="https://mooseframework.inl.gov/docs/doxygen/moose/classes.html">MOOSE Doxygen</a></li><li><a href="../development/contributing.html">Contributing</a></li><li><a href="../publications.html">List of Publications</a></li></ul><ul class="dropdown-content" id="423831ab-3030-4e67-bcba-61172e1395da"><li><a href="https://github.com/arfc/moltres/discussions">Moltres Discussion Forum</a></li><li><a href="https://github.com/idaholab/moose/discussions">MOOSE Discussion Forum</a></li></ul><ul class="dropdown-content" id="b2ebff47-a241-4df5-b717-a9eed41f1cc3"><li><a href="installation.html">Install Moltres</a></li><li><a href="tutorials.html">Tutorials</a></li></ul><ul class="dropdown-content" id="b8af1f90-cd8a-462c-84d9-7503376f6091"><li><a href="../syntax/index.html">Moltres Syntax</a></li><li><a href="https://mooseframework.inl.gov/source/index.html">MOOSE Syntax</a></li><li><a href="../doxygen/classes.html">Moltres Doxygen</a></li><li><a href="https://mooseframework.inl.gov/docs/doxygen/moose/classes.html">MOOSE Doxygen</a></li><li><a href="../development/contributing.html">Contributing</a></li><li><a href="../publications.html">List of Publications</a></li></ul><ul class="dropdown-content" id="01329192-5c0a-4725-a68a-b50fd0c74cee"><li><a href="https://github.com/arfc/moltres/discussions">Moltres Discussion Forum</a></li><li><a href="https://github.com/idaholab/moose/discussions">MOOSE Discussion Forum</a></li></ul></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="row"><div class="col l12"><div class="input-field"><input type_="text" onkeyup="mooseSearch()" placeholder="/index.md" id="moose-search-box"></input></div></div><div><div class="col s12" id="moose-search-results"></div></div></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="col hide-on-med-and-down l12"><nav class="breadcrumb-nav"><div class="nav-wrapper"><span class="breadcrumb">getting_started</span><a href="#" class="breadcrumb">sss2_gc</a></div></nav></div></div><div class="row"><div class="moose-content col s12 m12 l10"><section id="617402b2-e6bf-45e6-afb3-d831d1fb437e" data-section-level="1" data-section-text="Group Constant File Generation With extractSerpent2GCs.py"><h1 id="group-constant-file-generation-with">Group Constant File Generation With <code>extractSerpent2GCs.py</code></h1><section class="scrollspy" id="b6e4fdbe-8243-4e6a-833a-99ac6e11c15c" data-section-level="2" data-section-text="Example problem : Two - region MSRE model"><h2 id="example-problem-two-region-msre-model">Example problem: Two-region MSRE model</h2><p>Here, group constants are taken from an example Serpent output using PyNE. These will be used to generate text-based group constant files using <code>extractSerpent2GCs.py</code>. The relevant files for this tutorial may be found in the <a href="https://github.com/arfc/moltres/tree/devel/tutorial"><code>MSRE_group_constants</code></a> tutorial directory.</p><p>Moltres is <em>not</em> a spatially homogenized diffusion code. MOOSE is made for running <strong>big</strong>, <strong>intense</strong> problems, using modern HPC. Because there is no desire to homogenize spatially here, the materials that the user would like used in Moltres should each fill their own infinite universe. Then, this universe should have its group constants generated using the <code>set gcu &lt;material universe numbers&gt;</code> option in Serpent 2.</p><p>It&#x27;s important that universe 0, the main universe, is not included. Serpent takes tallies for group constants in the first universe it identifies, so including 0 means that no further universes will be included in GC generation. (please double check this on the <a href="https://ttuki.vtt.fi/serpent">serpent forum</a>).</p><section id="e5553c79-cf26-44eb-a371-dcf1ce255012" data-section-level="3" data-section-text="Step 1 : Generating Group Constants with Serpent 2"><h3 id="step-1-generating-group-constants-with-serpent-2">Step 1: Generating Group Constants with Serpent 2</h3><p>In this directory, we provide a Serpent input file for simulating ORNL&#x27;s Molten Salt Reactor Experiment, documented largely on websites like <a href="http://www.energyfromthorium.com/pdf/">this</a>.</p><p>For group constant generation, Cole Gentry found that a 4 group structure with three thermal groups and one fast group works well in the graphite moderated FHR. There is also an available recommended 13-group structure commented out in the <code>gentryGroups.serp</code> file  The PDF of these findings can be found <a href="http://trace.tennessee.edu/utk_graddiss/3695/">here</a>.</p><p>The &quot;fuel&quot; file contains &quot;cards&quot; (a relic term referring to the fortran-dominated reactor physics ages of yore) that will generate group constants at a few temperatures, and likewise for the &quot;moder&quot; file. Like a cooking show, we have prepared the important results for you in the <code>fuel.coe</code> and <code>moder.coe</code> files, which get parsed by <code>serpentTools</code> in the <code>extractSerpent2GCs</code> script. <code>serpentTools</code> is a suite of parsers designed by GATech for parsing <code>SERPENT</code> output files. More information can be found at <a href="http://serpent-tools.readthedocs.io/en/latest/">here</a>.</p></section><section id="d465162d-f2e4-403b-a917-a5ab5850d377" data-section-level="3" data-section-text="Step 2 : Parsing Serpent 2 Output Files with extractSerpent 2 GCs . py"><h3 id="step-2-parsing-serpent-2-output-files-with-extractserpent-2-gcs-py">Step 2: Parsing Serpent 2 Output Files with extractSerpent2GCs.py</h3><p>The command to run in order to generate the Moltres-compatible group constants is:</p><pre class="moose-pre"><code class="language-text">
$MOLTRES/python/extractSerpent2GCs.py MSREProperties msre_gentry_4g tempMapping.txt secBranch.txt universeMapping.txt
</code></pre><p>where $MOLTRES is an environment variable leading to the install location of Moltres. An alternative would be to just add the $MOLTRES/python directory to your path.</p><p>The input syntax requires a directory name you&#x27;d like to create, a file base name that Moltres will look at, a file that maps primary branch names to temperatures, a file that lists the secondary branch names, and lastly a file that maps universe numbers from Serpent to material names. Group constants will be extracted for all materials listed in the last file.</p><p>The <code></code><code>secBranch.txt</code><code></code> file should be blank if no secondary branches were used, i.e. there is only one branch variation per burnup step. </p></section></section></section></div><div class="col hide-on-med-and-down l2"><div class="toc-wrapper pin-top"><ul class="section table-of-contents"><li><a href="#b6e4fdbe-8243-4e6a-833a-99ac6e11c15c" class="tooltipped" data-position="left" data-tooltip="Example problem : Two - region MSRE model">Example problem : Two - region MSRE model</a></li></ul></div></div></div></div></main></div></body><script type="text/javascript" src="../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../js/init.js"></script><script type="text/javascript" src="../js/navigation.js"></script><script type="text/javascript" src="../contrib/fuse/fuse.min.js"></script><script type="text/javascript" src="../js/search_index.js"></script><script type="text/javascript" src="../js/sqa_moose.js"></script>