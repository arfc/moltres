<!DOCTYPE html><head><meta charset="UTF-8"><title>LimitK | Moltres</title><link href="../../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/devel_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/civet_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/moltres.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../../contrib/jquery/jquery.min.js"></script></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="../../index.html" class="left moose-logo hide-on-med-and-down" id="home-button">Moltres</a><a href="https://github.com/arfc/moltres" class="right"><img src="../../media/framework/github-logo.png" class="github-mark"></img><img src="../../media/framework/github-mark.png" class="github-logo"></img></a><ul class="right hide-on-med-and-down"><li><a href="#!" class="dropdown-trigger" data-target="a45c47da-57a9-49f5-a8e7-4c2e1e215351" data-constrainWidth="false">Getting Started<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="2db8e6b8-20fc-4366-9081-52cf2b7a4b9e" data-constrainWidth="false">Documentation<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="19a91fc1-50d6-4a72-8abd-83475ca960ad" data-constrainWidth="false">Help<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="../../citing.html">Citing</a></li></ul><a href="#" class="sidenav-trigger" data-target="6766348d-24c2-437d-b309-39a5083698ef"><i class="material-icons">menu</i></a><ul class="sidenav" id="6766348d-24c2-437d-b309-39a5083698ef"><li><a href="#!" class="dropdown-trigger" data-target="0502a2e2-e0f1-4cad-8ccb-7c0fad4dcbaf" data-constrainWidth="false">Getting Started<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="5321b61d-4c82-4994-a796-7b7bfa6cc7a0" data-constrainWidth="false">Documentation<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="36faf33f-59a3-44ab-8d3b-94b1c7ad68b4" data-constrainWidth="false">Help<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="../../citing.html">Citing</a></li></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div><ul class="dropdown-content" id="a45c47da-57a9-49f5-a8e7-4c2e1e215351"><li><a href="../../getting_started/installation.html">Install Moltres</a></li><li><a href="../../getting_started/theory.html">Theory</a></li><li><a href="../../getting_started/tutorials.html">Tutorials</a></li></ul><ul class="dropdown-content" id="2db8e6b8-20fc-4366-9081-52cf2b7a4b9e"><li><a href="../../syntax/index.html">Moltres Syntax</a></li><li><a href="https://mooseframework.inl.gov/source/index.html">MOOSE Syntax</a></li><li><a href="../../doxygen/classes.html">Moltres Doxygen</a></li><li><a href="https://mooseframework.inl.gov/docs/doxygen/moose/classes.html">MOOSE Doxygen</a></li><li><a href="../../development/contributing.html">Contributing</a></li><li><a href="../../publications.html">List of Publications</a></li></ul><ul class="dropdown-content" id="19a91fc1-50d6-4a72-8abd-83475ca960ad"><li><a href="https://github.com/arfc/moltres/discussions">Moltres Discussion Forum</a></li><li><a href="https://github.com/idaholab/moose/discussions">MOOSE Discussion Forum</a></li></ul><ul class="dropdown-content" id="0502a2e2-e0f1-4cad-8ccb-7c0fad4dcbaf"><li><a href="../../getting_started/installation.html">Install Moltres</a></li><li><a href="../../getting_started/theory.html">Theory</a></li><li><a href="../../getting_started/tutorials.html">Tutorials</a></li></ul><ul class="dropdown-content" id="5321b61d-4c82-4994-a796-7b7bfa6cc7a0"><li><a href="../../syntax/index.html">Moltres Syntax</a></li><li><a href="https://mooseframework.inl.gov/source/index.html">MOOSE Syntax</a></li><li><a href="../../doxygen/classes.html">Moltres Doxygen</a></li><li><a href="https://mooseframework.inl.gov/docs/doxygen/moose/classes.html">MOOSE Doxygen</a></li><li><a href="../../development/contributing.html">Contributing</a></li><li><a href="../../publications.html">List of Publications</a></li></ul><ul class="dropdown-content" id="36faf33f-59a3-44ab-8d3b-94b1c7ad68b4"><li><a href="https://github.com/arfc/moltres/discussions">Moltres Discussion Forum</a></li><li><a href="https://github.com/idaholab/moose/discussions">MOOSE Discussion Forum</a></li></ul></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="row"><div class="col l12"><div class="input-field"><input type_="text" onkeyup="mooseSearch()" placeholder="/index.md" id="moose-search-box"></input></div></div><div><div class="col s12" id="moose-search-results"></div></div></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="col hide-on-med-and-down l12"><nav class="breadcrumb-nav"><div class="nav-wrapper"><span class="breadcrumb">source</span><span class="breadcrumb">postprocessors</span><a href="#" class="breadcrumb">LimitK</a></div></nav></div></div><div class="row"><div class="moose-content col s12 m12 l10"><section id="b6c3cddb-61eb-4e1f-89dd-e11048ad0322" data-section-level="1" data-section-text="LimitK"><h1 id="limitk">LimitK</h1><div class="card moose-alert moose-alert-construction"><div class="card-title moose-alert-title"><i class="material-icons moose-inline-icon">build</i><span class="moose-alert-title-brand">construction:</span>Undocumented Class</div><div class="card-content"><div class="moose-alert-content"><p>The LimitK has not been documented. The content listed below should be used as a starting point for documenting the class, which includes the typical automatic documentation associated with a MooseObject; however, what is contained is ultimately determined by what is necessary to make the documentation clear for users.</p></div></div></div><p>Reports the timestep size</p><section class="scrollspy" id="4f23db44-ef80-4fbe-8f34-7c62532adfe2" data-section-level="2" data-section-text="Overview"><h2 id="overview">Overview</h2><p></p></section><section class="scrollspy" id="418f7ddd-2947-4b21-b2cb-99da2f4e5c7d" data-section-level="2" data-section-text="Example Input File Syntax"><h2 id="example-input-file-syntax">Example Input File Syntax</h2><p></p></section><section class="scrollspy" id="7183f902-c7b0-47d0-be7f-a4856c8785ec" data-section-level="2" data-section-text="Input Parameters"><h2 id="input-parameters">Input Parameters</h2><section id="a6cf949e-3ea8-4539-8a10-820346779a66" data-section-level="3" data-section-text="Required Parameters" data-details-open="open"><details class="moose-section-content" open="open"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">cutback_factor</span><span class="moose-parameter-header-description">How much to cut the time step if multiplication is too high.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>How much to cut the time step if multiplication is too high.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">growth_factor</span><span class="moose-parameter-header-description">How much to grow the time step if multiplication is ok.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>How much to grow the time step if multiplication is ok.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">k_postprocessor</span><span class="moose-parameter-header-description">The name of the postprocessor providing k values.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>PostprocessorName</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>The name of the postprocessor providing k values.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">k_threshold</span><span class="moose-parameter-header-description">The maximum k value before we start cutting time steps.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>The maximum k value before we start cutting time steps.</p></div></li></ul><summary><h3 data-details-open="open"><span class="moose-section-icon"></span>Required Parameters</h3></summary></details></section><section id="8adfe406-790e-4293-80b0-e6204eb28c98" data-section-level="3" data-section-text="Optional Parameters" data-details-open="open"><details class="moose-section-content" open="open"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">execute_on</span><span class="moose-parameter-header-default">TIMESTEP_END</span><span class="moose-parameter-header-description">The list of flag(s) indicating when this object should be executed, the available options include NONE, INITIAL, LINEAR, NONLINEAR, TIMESTEP_END, TIMESTEP_BEGIN, MULTIAPP_FIXED_POINT_END, MULTIAPP_FIXED_POINT_BEGIN, FINAL, CUSTOM.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>TIMESTEP_END</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>ExecFlagEnum</p><p class="moose-parameter-description-options"><span>Options:</span>NONE, INITIAL, LINEAR, NONLINEAR, TIMESTEP_END, TIMESTEP_BEGIN, MULTIAPP_FIXED_POINT_END, MULTIAPP_FIXED_POINT_BEGIN, FINAL, CUSTOM, TRANSFER</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>The list of flag(s) indicating when this object should be executed, the available options include NONE, INITIAL, LINEAR, NONLINEAR, TIMESTEP_END, TIMESTEP_BEGIN, MULTIAPP_FIXED_POINT_END, MULTIAPP_FIXED_POINT_BEGIN, FINAL, CUSTOM.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">prop_getter_suffix</span><span class="moose-parameter-header-description">An optional suffix parameter that can be appended to any attempt to retrieve/get material properties. The suffix will be prepended with a '_' character.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>MaterialPropertyName</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>An optional suffix parameter that can be appended to any attempt to retrieve/get material properties. The suffix will be prepended with a '_' character.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">use_interpolated_state</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">For the old and older state use projected material properties interpolated at the quadrature points. To set up projection use the ProjectedStatefulMaterialStorageAction.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>For the old and older state use projected material properties interpolated at the quadrature points. To set up projection use the ProjectedStatefulMaterialStorageAction.</p></div></li></ul><summary><h3 data-details-open="open"><span class="moose-section-icon"></span>Optional Parameters</h3></summary></details></section><section id="a9f34ebe-a6dc-4223-8a52-e7b9a8ca730a" data-section-level="3" data-section-text="Advanced Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">allow_duplicate_execution_on_initial</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">In the case where this UserObject is depended upon by an initial condition, allow it to be executed twice during the initial setup (once before the IC and again after mesh adaptivity (if applicable).</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>In the case where this UserObject is depended upon by an initial condition, allow it to be executed twice during the initial setup (once before the IC and again after mesh adaptivity (if applicable).</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">control_tags</span><span class="moose-parameter-header-description">Adds user-defined labels for accessing object parameters via control logic.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector&lt;std::string&gt;</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Adds user-defined labels for accessing object parameters via control logic.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">enable</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Set the enabled status of the MooseObject.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>Yes</p><p class="moose-parameter-description"><span>Description:</span>Set the enabled status of the MooseObject.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">execution_order_group</span><span class="moose-parameter-header-default">0</span><span class="moose-parameter-header-description">Execution order groups are executed in increasing order (e.g., the lowest number is executed first). Note that negative group numbers may be used to execute groups before the default (0) group. Please refer to the user object documentation for ordering of user object execution within a group.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>0</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>int</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Execution order groups are executed in increasing order (e.g., the lowest number is executed first). Note that negative group numbers may be used to execute groups before the default (0) group. Please refer to the user object documentation for ordering of user object execution within a group.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">force_postaux</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Forces the UserObject to be executed in POSTAUX</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Forces the UserObject to be executed in POSTAUX</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">force_preaux</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Forces the UserObject to be executed in PREAUX</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Forces the UserObject to be executed in PREAUX</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">force_preic</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Forces the UserObject to be executed in PREIC during initial setup</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Forces the UserObject to be executed in PREIC during initial setup</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">outputs</span><span class="moose-parameter-header-description">Vector of output names where you would like to restrict the output of variables(s) associated with this object</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector&lt;OutputName&gt;</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Vector of output names where you would like to restrict the output of variables(s) associated with this object</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">use_displaced_mesh</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Whether or not this object should use the displaced mesh for computation.  Note that in the case this is true but no displacements are provided in the Mesh block the undisplaced mesh will still be used.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Whether or not this object should use the displaced mesh for computation.  Note that in the case this is true but no displacements are provided in the Mesh block the undisplaced mesh will still be used.</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Advanced Parameters</h3></summary></details></section></section><section class="scrollspy" id="8ebfbf42-67d7-43de-9245-e67283248aaa" data-section-level="2" data-section-text="Input Files"><h2 id="input-files">Input Files</h2><ul class="moose-list-inputs browser-default"><li><a class="moose-source-filename tooltipped modal-trigger" href="#5910d0c3-2707-46b4-9f3c-fadb94ced9c7">(problems/rodded2D/rodded.i)</a></li><li><a class="moose-source-filename tooltipped modal-trigger" href="#8bcfc6f2-c610-4544-bb67-8ac7ebacd785">(problems/2017_annals_pub_msre_compare/2group.i)</a></li><li><a class="moose-source-filename tooltipped modal-trigger" href="#6e64c5fa-a5af-4182-92ca-7be3672fef7b">(problems/2017_annals_pub_msre_compare/auto_diff_rho.i)</a></li><li><a class="moose-source-filename tooltipped modal-trigger" href="#82bed6c7-2366-4295-b39f-37c7c6849e2a">(problems/picard/tmp_nts.i)</a></li><li><a class="moose-source-filename tooltipped modal-trigger" href="#a6234e9b-79c3-45b8-beda-83b7c8dccae0">(problems/picard/nts_no_pres.i)</a></li><li><a class="moose-source-filename tooltipped modal-trigger" href="#e7921015-38dc-4547-b797-edcd1717a1fb">(problems/2017_annals_pub_msre_compare/4group.i)</a></li><li><a class="moose-source-filename tooltipped modal-trigger" href="#f7156758-93f9-4c8b-a160-f4bde02a6f0e">(problems/publication_level_cases/twod_control_rod_yank/rodded.i)</a></li></ul></section></section><div class="moose-modal modal" id="5910d0c3-2707-46b4-9f3c-fadb94ced9c7"><div class="modal-content"><h4>(problems/rodded2D/rodded.i)</h4><pre class="moose-pre"><code class="language-text">flow_velocity=21.7 # cm/s. See MSRE-properties.ods
nt_scale=1e13
ini_temp=922
diri_temp=922

[GlobalParams]
  num_groups = 4
  num_precursor_groups = 6
  use_exp_form = false
  group_fluxes = &#x27;group1 group2 group3 group4&#x27;
  temperature = temp
  sss2_input = true
  pre_concs = &#x27;pre1 pre2 pre3 pre4 pre5 pre6&#x27;
  account_delayed = true
[]

[Mesh]
  file = &#x27;2d_rodded_lattice.msh&#x27;
[../]

[Problem]
  coord_type = RZ
  kernel_coverage_check = false
[]

[Variables]
  [./temp]
    initial_condition = ${ini_temp}
    scaling = 1e-4
  [../]
  [./rodPosition]
    family = SCALAR
    order = FIRST
    initial_condition = 0.0
  [../]
[]

[Precursors]
  [./pres]
    var_name_base = pre
    block = &#x27;fuel&#x27;
    outlet_boundaries = &#x27;fuel_tops&#x27;
    u_def = 0
    v_def = ${flow_velocity}
    w_def = 0
    nt_exp_form = false
    family = MONOMIAL
    order = CONSTANT
    # jac_test = true
  [../]
[]

[Nt]
  var_name_base = group
  vacuum_boundaries = &#x27;fuel_bottoms fuel_tops moder_bottoms moder_tops outer_wall cRod_top cRod_bot&#x27;
  create_temperature_var = false
[]

[Kernels]
  # Temperature
  [./temp_time_derivative]
    type = MatINSTemperatureTimeDerivative
    variable = temp
  [../]
  [./temp_source_fuel]
    type = TransientFissionHeatSource
    variable = temp
    nt_scale=${nt_scale}
    block = &#x27;fuel&#x27;
  [../]
  [./temp_source_mod]
    type = GammaHeatSource
    variable = temp
    gamma = .0144 # Cammi .0144
    block = &#x27;moder&#x27;
    average_fission_heat = &#x27;average_fission_heat&#x27;
  [../]
  [./temp_diffusion]
    type = MatDiffusion
    diffusivity = &#x27;k&#x27;
    variable = temp
  [../]
  [./temp_advection_fuel]
    type = ConservativeTemperatureAdvection
    velocity = &#x27;0 ${flow_velocity} 0&#x27;
    variable = temp
    block = &#x27;fuel&#x27;
  [../]
[]

[ScalarKernels]
  [./tdRodPos]
    type = ODETimeDerivative
    variable = rodPosition
  [../]
  [./rodposForce]
    type = ParsedODEKernel
    function = &#x27;rodPosition - 100&#x27;
    variable = rodPosition
  [../]
[]

[BCs]
  [./temp_diri_cg]
    boundary = &#x27;moder_bottoms fuel_bottoms outer_wall&#x27;
    type = FunctionDirichletBC
    function = &#x27;temp_bc_func&#x27;
    variable = temp
  [../]
  [./temp_advection_outlet]
    boundary = &#x27;fuel_tops&#x27;
    type = TemperatureOutflowBC
    variable = temp
    velocity = &#x27;0 ${flow_velocity} 0&#x27;
  [../]
[]

[Functions]
  [./temp_bc_func]
    type = ParsedFunction
    value = &#x27;${ini_temp} - (${ini_temp} - ${diri_temp}) * tanh(t/1e-2)&#x27;
  [../]
[]

[Materials]
  [./fuel]
    type = GenericMoltresMaterial
    property_tables_root = &#x27;../../tutorial/step01_groupConstants/MSREProperties/msre_gentry_4gfuel_&#x27;
    interp_type = &#x27;spline&#x27;
    block = &#x27;fuel&#x27;
    prop_names = &#x27;k cp&#x27;
    prop_values = &#x27;.0553 1967&#x27; # Robertson MSRE technical report @ 922 K
  [../]
  [./rho_fuel]
    type = DerivativeParsedMaterial
    f_name = rho
    function = &#x27;2.146e-3 * exp(-1.8 * 1.18e-4 * (temp - 922))&#x27;
    args = &#x27;temp&#x27;
    derivative_order = 1
    block = &#x27;fuel&#x27;
  [../]
  [./moder]
    type = GenericMoltresMaterial
    property_tables_root = &#x27;../../tutorial/step01_groupConstants/MSREProperties/msre_gentry_4gmoder_&#x27;
    interp_type = &#x27;spline&#x27;
    prop_names = &#x27;k cp&#x27;
    prop_values = &#x27;.312 1760&#x27; # Cammi 2011 at 908 K
    block = &#x27;moder&#x27;
  [../]
  [./rho_moder]
    type = DerivativeParsedMaterial
    f_name = rho
    function = &#x27;1.86e-3 * exp(-1.8 * 1.0e-5 * (temp - 922))&#x27;
    args = &#x27;temp&#x27;
    derivative_order = 1
    block = &#x27;moder&#x27;
  [../]
  [./cRod]
    type = RoddedMaterial
    property_tables_root = &#x27;../../tutorial/step01_groupConstants/MSREProperties/msre_gentry_4gmoder_&#x27;
    interp_type = &#x27;spline&#x27;
    prop_names = &#x27;k cp&#x27;
    prop_values = &#x27;.312 1760&#x27; # Cammi 2011 at 908 K
    block = &#x27;cRod&#x27;
    rodDimension = &#x27;y&#x27;
    rodPosition = rodPosition
    absorb_factor = 1e6 # how much more absorbing than usual in absorbing region?
  [../]
  [./rho_crod]
    type = DerivativeParsedMaterial
    f_name = rho
    function = &#x27;1.86e-3 * exp(-1.8 * 1.0e-5 * (temp - 922))&#x27;
    args = &#x27;temp&#x27;
    derivative_order = 1
    block = &#x27;cRod&#x27;
  [../]

[]

[Executioner]
  type = Transient
  end_time = 10000

  nl_rel_tol = 1e-6
  nl_abs_tol = 1e-6

  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason -snes_linesearch_monitor&#x27;
  solve_type = &#x27;PJFNK&#x27;
  petsc_options_iname = &#x27;-pc_type&#x27;
  petsc_options_value = &#x27;lu&#x27;
  line_search = &#x27;none&#x27;

  nl_max_its = 30
  l_max_its = 100
  [./TimeStepper]
    type = PostprocessorDT
    postprocessor = limit_k
    dt = 0.1
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
    # ksp_norm = none
  [../]
[]

[Postprocessors]
  [./group1_current]
    type = IntegralNewVariablePostprocessor
    variable = group1
    outputs = &#x27;console csv&#x27;
  [../]
  [./group1_old]
    type = IntegralOldVariablePostprocessor
    variable = group1
    outputs = &#x27;console csv&#x27;
  [../]
  [./multiplication]
    type = DivisionPostprocessor
    value1 = group1_current
    value2 = group1_old
    outputs = &#x27;console csv&#x27;
  [../]
  [./temp_fuel]
    type = ElementAverageValue
    variable = temp
    block = &#x27;fuel&#x27;
    outputs = &#x27;csv console&#x27;
  [../]
  [./temp_moder]
    type = ElementAverageValue
    variable = temp
    block = &#x27;moder&#x27;
    outputs = &#x27;csv console&#x27;
  [../]
  [./average_fission_heat]
     type = AverageFissionHeat
     nt_scale = ${nt_scale}
     execute_on = &#x27;linear nonlinear&#x27;
     outputs = &#x27;console&#x27;
     block = &#x27;fuel&#x27;
  [../]
  [./limit_k]
    type = LimitK
    execute_on = &#x27;timestep_end&#x27;
    k_postprocessor = multiplication
    growth_factor = 1.2
    cutback_factor = .4
    k_threshold = 1.5
  [../]
[]

[Outputs]
  perf_graph = true
  print_linear_residuals = true
  csv = true
  exodus = true
  execute_on = &#x27;timestep_end final&#x27;
  file_base = &#x27;out&#x27;
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="moose-modal modal" id="8bcfc6f2-c610-4544-bb67-8ac7ebacd785"><div class="modal-content"><h4>(problems/2017_annals_pub_msre_compare/2group.i)</h4><pre class="moose-pre"><code class="language-text">flow_velocity = 21.7 # cm/s. See MSRE-properties.ods
nt_scale = 1e13
ini_temp = 922
diri_temp = 922
gamma_frac = .075
R = 73
H = 162.56

[GlobalParams]
  num_groups = 2
  num_precursor_groups = 6
  use_exp_form = false
  group_fluxes = &#x27;group1 group2&#x27;
  temperature = temp
  sss2_input = true
  pre_concs = &#x27;pre1 pre2 pre3 pre4 pre5 pre6&#x27;
  account_delayed = true
  nt_scale = ${nt_scale}
[]

[Mesh]
  coord_type = RZ
  file = &#x27;2d_lattice_structured.msh&#x27;
[]

[Variables]
  [temp]
    initial_condition = ${ini_temp}
    scaling = 1e-4
  []
[]

[AuxVariables]
  [power_density]
    order = CONSTANT
    family = MONOMIAL
  []
[]

[Precursors]
  [pres]
    var_name_base = pre
    block = &#x27;fuel&#x27;
    outlet_boundaries = &#x27;fuel_tops&#x27;
    u_def = 0
    v_def = ${flow_velocity}
    w_def = 0
    nt_exp_form = false
    loop_precursors = false
    family = MONOMIAL
    order = CONSTANT
    # jac_test = true
  []
[]

[Nt]
  var_name_base = group
  vacuum_boundaries = &#x27;fuel_bottoms fuel_tops moder_bottoms moder_tops outer_wall&#x27;
  create_temperature_var = false
  scaling = 1e-4
  pre_blocks = &#x27;fuel&#x27;
[]

[Kernels]
  # Temperature
  [temp_time_derivative]
    type = MatINSTemperatureTimeDerivative
    variable = temp
  []
  [temp_source_fuel]
    type = TransientFissionHeatSource
    variable = temp
    block = &#x27;fuel&#x27;
  []
  [temp_source_mod]
    type = GammaHeatSource
    variable = temp
    block = &#x27;moder&#x27;
    average_fission_heat = &#x27;average_fission_heat&#x27;
    gamma = gamma_func
  []
  [temp_diffusion]
    type = MatDiffusion
    diffusivity = &#x27;k&#x27;
    variable = temp
  []
  [temp_advection_fuel]
    type = ConservativeTemperatureAdvection
    velocity = &#x27;0 ${flow_velocity} 0&#x27;
    variable = temp
    block = &#x27;fuel&#x27;
  []
[]

[BCs]
  [temp_diri_cg]
    boundary = &#x27;fuel_bottoms outer_wall&#x27;
    type = FlexiblePostprocessorDirichletBC
    postprocessor = coreEndTemp
    offset = -27.8
    variable = temp
  []
  # [./temp_diri_cg]
  #   boundary = &#x27;moder_bottoms fuel_bottoms outer_wall&#x27;
  #   type = FunctionDirichletBC
  #   function = &#x27;temp_bc_func&#x27;
  #   variable = temp
  # [../]
  [temp_advection_outlet]
    boundary = &#x27;fuel_tops&#x27;
    type = TemperatureOutflowBC
    variable = temp
    velocity = &#x27;0 ${flow_velocity} 0&#x27;
  []
[]

[AuxKernels]
  [fuel]
    block = &#x27;fuel&#x27;
    type = FissionHeatSourceTransientAux
    variable = power_density
  []
  [moderator]
    block = &#x27;moder&#x27;
    type = ModeratorHeatSourceTransientAux
    average_fission_heat = &#x27;average_fission_heat&#x27;
    variable = power_density
    gamma = gamma_func
  []
[]

[Functions]
  [temp_bc_func]
    type = ParsedFunction
    expression = &#x27;${ini_temp} - (${ini_temp} - ${diri_temp}) * tanh(t/1e-2)&#x27;
  []
  [gamma_func]
    type = ParsedFunction
    expression = &#x27;${gamma_frac} * pi^2 / 4 * cos(pi * x / (2. * ${R})) * sin(pi * y / ${H})&#x27;
  []
[]

[Materials]
  [fuel]
    type = GenericMoltresMaterial
    property_tables_root = &#x27;../../property_file_dir/serp3d2group0.78eV/2g0.78eV_fuel_&#x27;
    interp_type = &#x27;spline&#x27;
    block = &#x27;fuel&#x27;
    prop_names = &#x27;k cp&#x27;
    prop_values = &#x27;.0553 1967&#x27; # Robertson MSRE technical report @ 922 K
    controller_gain = 0
  []
  [rho_fuel]
    type = DerivativeParsedMaterial
    property_name = rho
    expression = &#x27;2.146e-3 * exp(-1.8 * 1.18e-4 * (temp - 922))&#x27;
    coupled_variables = &#x27;temp&#x27;
    derivative_order = 1
    block = &#x27;fuel&#x27;
  []
  [moder]
    type = GenericMoltresMaterial
    property_tables_root = &#x27;../../property_file_dir/serp3d2group0.78eV/2g0.78eV_moder_&#x27;
    interp_type = &#x27;spline&#x27;
    prop_names = &#x27;k cp&#x27;
    prop_values = &#x27;.312 1760&#x27; # Cammi 2011 at 908 K
    block = &#x27;moder&#x27;
    controller_gain = 0
  []
  [rho_moder]
    type = DerivativeParsedMaterial
    property_name = rho
    expression = &#x27;1.86e-3 * exp(-1.8 * 1.0e-5 * (temp - 922))&#x27;
    coupled_variables = &#x27;temp&#x27;
    derivative_order = 1
    block = &#x27;moder&#x27;
  []
[]

[Executioner]
  type = Transient
  end_time = 10000

  nl_rel_tol = 1e-6
  nl_abs_tol = 6e-6

  solve_type = &#x27;PJFNK&#x27;
  line_search = none
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason -snes_linesearch_monitor&#x27;
  petsc_options_iname = &#x27;-pc_type&#x27;
  petsc_options_value = &#x27;lu&#x27;

  nl_max_its = 30
  l_max_its = 100

  dtmin = 1e-5
  [TimeStepper]
    type = PostprocessorDT
    postprocessor = limit_k
    dt = 1e-3
  []
[]

[Preconditioning]
  [SMP]
    type = SMP
    full = true
  []
[]

[Postprocessors]
  [group1_current]
    type = IntegralNewVariablePostprocessor
    variable = group1
    outputs = &#x27;console csv&#x27;
  []
  [group1_old]
    type = IntegralOldVariablePostprocessor
    variable = group1
    outputs = &#x27;console csv&#x27;
  []
  [multiplication]
    type = DivisionPostprocessor
    value1 = group1_current
    value2 = group1_old
    outputs = &#x27;console csv&#x27;
  []
  [temp_fuel]
    type = ElementAverageValue
    variable = temp
    block = &#x27;fuel&#x27;
    outputs = &#x27;csv console&#x27;
  []
  [temp_moder]
    type = ElementAverageValue
    variable = temp
    block = &#x27;moder&#x27;
    outputs = &#x27;csv console&#x27;
  []
  [average_fission_heat]
    type = AverageFissionHeat
    execute_on = &#x27;linear nonlinear&#x27;
    outputs = &#x27;csv console&#x27;
    block = &#x27;fuel&#x27;
  []
  [coreEndTemp]
    type = SideAverageValue
    variable = temp
    boundary = &#x27;fuel_tops&#x27;
    outputs = &#x27;csv console&#x27;
    execute_on = &#x27;linear nonlinear&#x27;
  []
  [limit_k]
    type = LimitK
    execute_on = &#x27;timestep_end&#x27;
    k_postprocessor = multiplication
    growth_factor = 1.2
    cutback_factor = .4
    k_threshold = 1.5
  []
[]

[Outputs]
  perf_graph = true
  print_linear_residuals = true
  csv = true
  exodus = true
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="moose-modal modal" id="6e64c5fa-a5af-4182-92ca-7be3672fef7b"><div class="modal-content"><h4>(problems/2017_annals_pub_msre_compare/auto_diff_rho.i)</h4><pre class="moose-pre"><code class="language-text">flow_velocity = 21.7 # cm/s. See MSRE-properties.ods
nt_scale = 1e13
ini_temp = 922
diri_temp = 922
gamma_frac = .075
R = 70.1675
H = 162.56

[GlobalParams]
  num_groups = 4
  num_precursor_groups = 6
  use_exp_form = false
  group_fluxes = &#x27;group1 group2 group3 group4&#x27;
  temperature = temp
  sss2_input = true
  pre_concs = &#x27;pre1 pre2 pre3 pre4 pre5 pre6&#x27;
  account_delayed = true
  nt_scale = ${nt_scale}
[]

[Mesh]
  coord_type = RZ
  file = &#x27;2d_lattice_structured.msh&#x27;
[]

[Variables]
  [temp]
    initial_condition = ${ini_temp}
    scaling = 1e-4
  []
[]

[AuxVariables]
  [power_density]
    order = CONSTANT
    family = MONOMIAL
  []
[]

[Precursors]
  [pres]
    var_name_base = pre
    block = &#x27;fuel&#x27;
    outlet_boundaries = &#x27;fuel_tops&#x27;
    u_def = 0
    v_def = ${flow_velocity}
    w_def = 0
    nt_exp_form = false
    loop_precursors = false
    family = MONOMIAL
    order = CONSTANT
    # jac_test = true
  []
[]

[Nt]
  var_name_base = group
  vacuum_boundaries = &#x27;fuel_bottoms fuel_tops moder_bottoms moder_tops outer_wall&#x27;
  create_temperature_var = false
  scaling = 1e-4
  pre_blocks = &#x27;fuel&#x27;
[]

[Kernels]
  # Temperature
  [temp_time_derivative]
    type = MatINSTemperatureTimeDerivative
    variable = temp
  []
  [temp_source_fuel]
    type = TransientFissionHeatSource
    variable = temp
    block = &#x27;fuel&#x27;
  []
  [temp_source_mod]
    type = GammaHeatSource
    variable = temp
    block = &#x27;moder&#x27;
    average_fission_heat = &#x27;average_fission_heat&#x27;
    gamma = gamma_func
  []
  [temp_diffusion]
    type = MatDiffusion
    diffusivity = &#x27;k&#x27;
    variable = temp
  []
  [temp_advection_fuel]
    type = ConservativeTemperatureAdvection
    velocity = &#x27;0 ${flow_velocity} 0&#x27;
    variable = temp
    block = &#x27;fuel&#x27;
  []
[]

[BCs]
  [temp_diri_cg]
    boundary = &#x27;fuel_bottoms outer_wall&#x27;
    type = FlexiblePostprocessorDirichletBC
    postprocessor = coreEndTemp
    offset = -27.8
    variable = temp
  []
  # [./temp_diri_cg]
  #   boundary = &#x27;moder_bottoms fuel_bottoms outer_wall&#x27;
  #   type = FunctionDirichletBC
  #   function = &#x27;temp_bc_func&#x27;
  #   variable = temp
  # [../]
  [temp_advection_outlet]
    boundary = &#x27;fuel_tops&#x27;
    type = TemperatureOutflowBC
    variable = temp
    velocity = &#x27;0 ${flow_velocity} 0&#x27;
  []
[]

[AuxKernels]
  [fuel]
    block = &#x27;fuel&#x27;
    type = FissionHeatSourceTransientAux
    variable = power_density
  []
  [moderator]
    block = &#x27;moder&#x27;
    type = ModeratorHeatSourceTransientAux
    average_fission_heat = &#x27;average_fission_heat&#x27;
    variable = power_density
    gamma = gamma_func
  []
[]

[Functions]
  [temp_bc_func]
    type = ParsedFunction
    expression = &#x27;${ini_temp} - (${ini_temp} - ${diri_temp}) * tanh(t/1e-2)&#x27;
  []
  [gamma_func]
    type = ParsedFunction
    expression = &#x27;${gamma_frac} * pi^2 / 4 * cos(pi * x / (2. * ${R})) * sin(pi * y / ${H})&#x27;
  []
[]

[Materials]
  [fuel]
    type = GenericMoltresMaterial
    property_tables_root = &#x27;../../tutorial/step01_groupConstants/MSREProperties/msre_gentry_4g_fuel_rod0_&#x27;
    interp_type = &#x27;spline&#x27;
    block = &#x27;fuel&#x27;
    prop_names = &#x27;k cp&#x27;
    prop_values = &#x27;.0553 1967&#x27; # Robertson MSRE technical report @ 922 K
    controller_gain = 0
  []
  [rho_fuel]
    type = DerivativeParsedMaterial
    property_name = rho
    expression = &#x27;2.146e-3 * exp(-1.8 * 1.18e-4 * (temp - 922))&#x27;
    coupled_variables = &#x27;temp&#x27;
    derivative_order = 1
    block = &#x27;fuel&#x27;
  []
  [moder]
    type = GenericMoltresMaterial
    property_tables_root = &#x27;../../tutorial/step01_groupConstants/MSREProperties/msre_gentry_4g_moder_rod0_&#x27;
    interp_type = &#x27;spline&#x27;
    prop_names = &#x27;k cp&#x27;
    prop_values = &#x27;.312 1760&#x27; # Cammi 2011 at 908 K
    block = &#x27;moder&#x27;
    controller_gain = 0
  []
  [rho_moder]
    type = DerivativeParsedMaterial
    property_name = rho
    expression = &#x27;1.86e-3 * exp(-1.8 * 1.0e-5 * (temp - 922))&#x27;
    coupled_variables = &#x27;temp&#x27;
    derivative_order = 1
    block = &#x27;moder&#x27;
  []
[]

[Executioner]
  type = Transient
  end_time = 10000

  nl_rel_tol = 1e-6
  nl_abs_tol = 6e-6

  solve_type = &#x27;PJFNK&#x27;
  line_search = none
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason -snes_linesearch_monitor&#x27;
  petsc_options_iname = &#x27;-pc_type&#x27;
  petsc_options_value = &#x27;lu&#x27;

  nl_max_its = 30
  l_max_its = 100

  dtmin = 1e-5
  [TimeStepper]
    type = PostprocessorDT
    postprocessor = limit_k
    dt = 1e-3
  []
[]

[Preconditioning]
  [SMP]
    type = SMP
    full = true
  []
[]

[Postprocessors]
  [group1_current]
    type = IntegralNewVariablePostprocessor
    variable = group1
    outputs = &#x27;console csv&#x27;
  []
  [group1_old]
    type = IntegralOldVariablePostprocessor
    variable = group1
    outputs = &#x27;console csv&#x27;
  []
  [multiplication]
    type = DivisionPostprocessor
    value1 = group1_current
    value2 = group1_old
    outputs = &#x27;console csv&#x27;
  []
  [temp_fuel]
    type = ElementAverageValue
    variable = temp
    block = &#x27;fuel&#x27;
    outputs = &#x27;csv console&#x27;
  []
  [temp_moder]
    type = ElementAverageValue
    variable = temp
    block = &#x27;moder&#x27;
    outputs = &#x27;csv console&#x27;
  []
  [average_fission_heat]
    type = AverageFissionHeat
    execute_on = &#x27;linear nonlinear&#x27;
    outputs = &#x27;csv console&#x27;
    block = &#x27;fuel&#x27;
  []
  [coreEndTemp]
    type = SideAverageValue
    variable = temp
    boundary = &#x27;fuel_tops&#x27;
    outputs = &#x27;csv console&#x27;
    execute_on = &#x27;linear nonlinear&#x27;
  []
  [limit_k]
    type = LimitK
    execute_on = &#x27;timestep_end&#x27;
    k_postprocessor = multiplication
    growth_factor = 1.2
    cutback_factor = .4
    k_threshold = 1.5
  []
[]

[Outputs]
  perf_graph = true
  print_linear_residuals = true
  csv = true
  exodus = true
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="moose-modal modal" id="82bed6c7-2366-4295-b39f-37c7c6849e2a"><div class="modal-content"><h4>(problems/picard/tmp_nts.i)</h4><pre class="moose-pre"><code class="language-text">flow_velocity=21.7 # cm/s. See MSRE-properties.ods
nt_scale=1e13
ini_temp=922
diri_temp=922

[GlobalParams]
  num_groups = 2
  num_precursor_groups = 6
  use_exp_form = false
  group_fluxes = &#x27;group1 group2&#x27;
  temperature = temp
  sss2_input = false
  account_delayed = false
[]

[Mesh]
  file = &#x27;2d_lattice_structured.msh&#x27;
  # file = &#x27;2d_lattice_structured_jac.msh&#x27;
[../]

[Problem]
  coord_type = RZ
[]

[Variables]
  [./group1]
    order = FIRST
    family = LAGRANGE
    initial_condition = 1
    scaling = 1e4
  [../]
  [./group2]
    order = FIRST
    family = LAGRANGE
    initial_condition = 1
    scaling = 1e4
  [../]
  [./temp]
    initial_condition = ${ini_temp}
    scaling = 1e-4
  [../]
[]

[Kernels]
  # Neutronics
  [./time_group1]
    type = NtTimeDerivative
    variable = group1
    group_number = 1
  [../]
  [./diff_group1]
    type = GroupDiffusion
    variable = group1
    group_number = 1
  [../]
  [./sigma_r_group1]
    type = SigmaR
    variable = group1
    group_number = 1
  [../]
  [./fission_source_group1]
    type = CoupledFissionKernel
    variable = group1
    group_number = 1
    block = &#x27;fuel&#x27;
  [../]
  [./inscatter_group1]
    type = InScatter
    variable = group1
    group_number = 1
  [../]
  [./diff_group2]
    type = GroupDiffusion
    variable = group2
    group_number = 2
  [../]
  [./sigma_r_group2]
    type = SigmaR
    variable = group2
    group_number = 2
  [../]
  [./time_group2]
    type = NtTimeDerivative
    variable = group2
    group_number = 2
  [../]
  [./fission_source_group2]
    type = CoupledFissionKernel
    variable = group2
    group_number = 2
    block = &#x27;fuel&#x27;
  [../]
  [./inscatter_group2]
    type = InScatter
    variable = group2
    group_number = 2
  [../]

  # Temperature
  [./temp_time_derivative]
    type = MatINSTemperatureTimeDerivative
    variable = temp
  [../]
  [./temp_source_fuel]
    type = TransientFissionHeatSource
    variable = temp
    nt_scale=${nt_scale}
    block = &#x27;fuel&#x27;
  [../]
  # [./temp_source_mod]
  #   type = GammaHeatSource
  #   variable = temp
  #   gamma = .0144 # Cammi .0144
  #   block = &#x27;moder&#x27;
  #   average_fission_heat = &#x27;average_fission_heat&#x27;
  # [../]
  [./temp_diffusion]
    type = MatDiffusion
    diffusivity = &#x27;k&#x27;
    variable = temp
  [../]
  [./temp_advection_fuel]
    type = ConservativeTemperatureAdvection
    velocity = &#x27;0 ${flow_velocity} 0&#x27;
    variable = temp
    block = &#x27;fuel&#x27;
  [../]
[]

[BCs]
  [./vacuum_group1]
    type = VacuumConcBC
    boundary = &#x27;fuel_bottoms fuel_tops moder_bottoms moder_tops outer_wall&#x27;
    variable = group1
  [../]
  [./vacuum_group2]
    type = VacuumConcBC
    boundary = &#x27;fuel_bottoms fuel_tops moder_bottoms moder_tops outer_wall&#x27;
    variable = group2
  [../]
  [./temp_diri_cg]
    boundary = &#x27;moder_bottoms fuel_bottoms outer_wall&#x27;
    type = FunctionDirichletBC
    function = &#x27;temp_bc_func&#x27;
    variable = temp
  [../]
  [./temp_advection_outlet]
    boundary = &#x27;fuel_tops&#x27;
    type = TemperatureOutflowBC
    variable = temp
    velocity = &#x27;0 ${flow_velocity} 0&#x27;
  [../]
[]

[Functions]
  [./temp_bc_func]
    type = ParsedFunction
    value = &#x27;${ini_temp} - (${ini_temp} - ${diri_temp}) * tanh(t/1e-2)&#x27;
  [../]
[]

[Materials]
  [./fuel]
    type = GenericMoltresMaterial
    property_tables_root = &#x27;../../property_file_dir/newt_msre_fuel_&#x27;
    interp_type = &#x27;spline&#x27;
    block = &#x27;fuel&#x27;
    prop_names = &#x27;k cp&#x27;
    prop_values = &#x27;.0553 1967&#x27; # Robertson MSRE technical report @ 922 K
  [../]
  [./rho_fuel]
    type = DerivativeParsedMaterial
    f_name = rho
    function = &#x27;2.146e-3 * exp(-1.8 * 1.18e-4 * (temp - 922))&#x27;
    args = &#x27;temp&#x27;
    derivative_order = 1
    block = &#x27;fuel&#x27;
  [../]
  [./moder]
    type = GenericMoltresMaterial
    property_tables_root = &#x27;../../property_file_dir/newt_msre_mod_&#x27;
    interp_type = &#x27;spline&#x27;
    prop_names = &#x27;k cp&#x27;
    prop_values = &#x27;.312 1760&#x27; # Cammi 2011 at 908 K
    block = &#x27;moder&#x27;
  [../]
  [./rho_moder]
    type = DerivativeParsedMaterial
    f_name = rho
    function = &#x27;1.86e-3 * exp(-1.8 * 1.0e-5 * (temp - 922))&#x27;
    args = &#x27;temp&#x27;
    derivative_order = 1
    block = &#x27;moder&#x27;
  [../]
[]

[Executioner]
  type = Transient
  end_time = 10000

  nl_rel_tol = 1e-6
  nl_abs_tol = 3e-6

  solve_type = &#x27;NEWTON&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason -snes_linesearch_monitor&#x27;
  petsc_options_iname = &#x27;-pc_type -pc_factor_shift_type&#x27;
  petsc_options_value = &#x27;lu       NONZERO&#x27;
  line_search = &#x27;none&#x27;
   # petsc_options_iname = &#x27;-snes_type&#x27;
  # petsc_options_value = &#x27;test&#x27;

  nl_max_its = 30
  l_max_its = 100

  dtmin = 1e-5
  # dtmax = 1
  # dt = 1e-3
  [./TimeStepper]
    type = PostprocessorDT
    postprocessor = &#x27;limit_k&#x27;
    dt = 1e-3
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

[Postprocessors]
  [./limit_k]
    type = LimitK
    growth_factor = 1.1
    cutback_factor = 0.4
    k_threshold = 1.25
    k_postprocessor = &#x27;multiplication&#x27;
  [../]
  [./group1_current]
    type = IntegralNewVariablePostprocessor
    variable = group1
    outputs = &#x27;console exodus&#x27;
  [../]
  [./group1_old]
    type = IntegralOldVariablePostprocessor
    variable = group1
    outputs = &#x27;console exodus&#x27;
  [../]
  [./multiplication]
    type = DivisionPostprocessor
    value1 = group1_current
    value2 = group1_old
    outputs = &#x27;console exodus&#x27;
  [../]
  [./temp_fuel]
    type = ElementAverageValue
    variable = temp
    block = &#x27;fuel&#x27;
    outputs = &#x27;exodus console&#x27;
  [../]
  [./temp_moder]
    type = ElementAverageValue
    variable = temp
    block = &#x27;moder&#x27;
    outputs = &#x27;exodus console&#x27;
  [../]
  # [./average_fission_heat]
  #   type = AverageFissionHeat
  #   nt_scale = ${nt_scale}
  #   execute_on = &#x27;linear nonlinear&#x27;
  #   outputs = &#x27;console&#x27;
  #   block = &#x27;fuel&#x27;
  # [../]
[]

[Outputs]
  perf_graph = true
  print_linear_residuals = true
  [./exodus]
    type = Exodus
    file_base = &#x27;auto_diff_rho&#x27;
    execute_on = &#x27;final&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]

# [ICs]
#   [./temp_ic]
#     type = RandomIC
#     variable = temp
#     min = 922
#     max = 1022
#   [../]
#   [./group1_ic]
#     type = RandomIC
#     variable = group1
#     min = .5
#     max = 1.5
#   [../]
#   [./group2_ic]
#     type = RandomIC
#     variable = group2
#     min = .5
#     max = 1.5
#   [../]
# []
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="moose-modal modal" id="a6234e9b-79c3-45b8-beda-83b7c8dccae0"><div class="modal-content"><h4>(problems/picard/nts_no_pres.i)</h4><pre class="moose-pre"><code class="language-text">flow_velocity=21.7 # cm/s. See MSRE-properties.ods
nt_scale=1e13
ini_temp=922
diri_temp=922

[GlobalParams]
  num_groups = 2
  num_precursor_groups = 6
  use_exp_form = false
  group_fluxes = &#x27;group1 group2&#x27;
  temperature = temp
  sss2_input = false
  pre_concs = &#x27;pre1 pre2 pre3 pre4 pre5 pre6&#x27;
  account_delayed = false
[]

[Mesh]
  file = &#x27;2d_lattice_structured.msh&#x27;
  # file = &#x27;2d_lattice_structured_jac.msh&#x27;
[../]

[Problem]
  coord_type = RZ
[]

[Variables]
  [./group1]
    order = FIRST
    family = LAGRANGE
    initial_condition = 1
    scaling = 1e4
  [../]
  [./group2]
    order = FIRST
    family = LAGRANGE
    initial_condition = 1
    scaling = 1e4
  [../]
[]

[AuxVariables]
  [./temp]
  [../]
[]

[Kernels]
  # Neutronics
  [./time_group1]
    type = NtTimeDerivative
    variable = group1
    group_number = 1
  [../]
  [./diff_group1]
    type = GroupDiffusion
    variable = group1
    group_number = 1
  [../]
  [./sigma_r_group1]
    type = SigmaR
    variable = group1
    group_number = 1
  [../]
  [./fission_source_group1]
    type = CoupledFissionKernel
    variable = group1
    group_number = 1
    block = &#x27;fuel&#x27;
  [../]
  [./inscatter_group1]
    type = InScatter
    variable = group1
    group_number = 1
  [../]
  [./diff_group2]
    type = GroupDiffusion
    variable = group2
    group_number = 2
  [../]
  [./sigma_r_group2]
    type = SigmaR
    variable = group2
    group_number = 2
  [../]
  [./time_group2]
    type = NtTimeDerivative
    variable = group2
    group_number = 2
  [../]
  [./fission_source_group2]
    type = CoupledFissionKernel
    variable = group2
    group_number = 2
    block = &#x27;fuel&#x27;
  [../]
  [./inscatter_group2]
    type = InScatter
    variable = group2
    group_number = 2
  [../]
[]

[BCs]
  [./vacuum_group1]
    type = VacuumConcBC
    boundary = &#x27;fuel_bottoms fuel_tops moder_bottoms moder_tops outer_wall&#x27;
    variable = group1
  [../]
  [./vacuum_group2]
    type = VacuumConcBC
    boundary = &#x27;fuel_bottoms fuel_tops moder_bottoms moder_tops outer_wall&#x27;
    variable = group2
  [../]
[]

[Materials]
  [./fuel]
    type = GenericMoltresMaterial
    property_tables_root = &#x27;../../property_file_dir/newt_msre_fuel_&#x27;
    interp_type = &#x27;spline&#x27;
    block = &#x27;fuel&#x27;
    prop_names = &#x27;k cp&#x27;
    prop_values = &#x27;.0553 1967&#x27; # Robertson MSRE technical report @ 922 K
  [../]
  [./moder]
    type = GenericMoltresMaterial
    property_tables_root = &#x27;../../property_file_dir/newt_msre_mod_&#x27;
    interp_type = &#x27;spline&#x27;
    prop_names = &#x27;k cp&#x27;
    prop_values = &#x27;.312 1760&#x27; # Cammi 2011 at 908 K
    block = &#x27;moder&#x27;
  [../]
[]

[Executioner]
  type = Transient
  end_time = 10000

  picard_max_its = 1
  picard_rel_tol = 1e-6
  picard_abs_tol = 1e-4

  nl_rel_tol = 1e-6
  nl_abs_tol = 1e-4

  solve_type = &#x27;NEWTON&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason -snes_linesearch_monitor&#x27;
  petsc_options_iname = &#x27;-pc_type -pc_factor_shift_type&#x27;
  petsc_options_value = &#x27;lu       NONZERO&#x27;
  line_search = &#x27;none&#x27;
   # petsc_options_iname = &#x27;-snes_type&#x27;
  # petsc_options_value = &#x27;test&#x27;

  nl_max_its = 10
  l_max_its = 100
  dtmin = 1e-3

  [./TimeStepper]
    type = PostprocessorDT
    postprocessor = &#x27;limit_k&#x27;
    dt = 1e-3
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

[Postprocessors]
  [./group1_current]
    type = IntegralNewVariablePostprocessor
    variable = group1
    outputs = &#x27;console exodus&#x27;
  [../]
  [./group1_old]
    type = IntegralOldVariablePostprocessor
    variable = group1
    outputs = &#x27;console exodus&#x27;
  [../]
  [./multiplication]
    type = DivisionPostprocessor
    value1 = group1_current
    value2 = group1_old
    outputs = &#x27;console exodus csv&#x27;
  [../]
  [./limit_k]
    type = LimitK
    growth_factor = 1.1
    cutback_factor = 0.4
    k_threshold = 1.1
    k_postprocessor = &#x27;multiplication&#x27;
  [../]
[]

[Outputs]
  perf_graph = true
  print_linear_residuals = true
  exodus = true
  csv = true
  execute_on = &#x27;final&#x27;
[]

[Debug]
  show_var_residual_norms = true
[]

[MultiApps]
  [./temp]
    type = TransientMultiApp
    app_type = MoltresApp
    positions = &#x27;0 0 0&#x27;
    input_files = &#x27;temp_no_pres.i&#x27;
  [../]
[]

[Transfers]
  [./temp_from_sub]
    type = MultiAppCopyTransfer
    direction = from_multiapp
    multi_app = &#x27;temp&#x27;
    source_variable = temp
    variable = temp
  [../]
  [./group1_to_sub]
    type = MultiAppCopyTransfer
    direction = to_multiapp
    multi_app = &#x27;temp&#x27;
    source_variable = group1
    variable = group1
  [../]
  [./group2_to_sub]
    type = MultiAppCopyTransfer
    direction = to_multiapp
    multi_app = &#x27;temp&#x27;
    source_variable = group2
    variable = group2
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="moose-modal modal" id="e7921015-38dc-4547-b797-edcd1717a1fb"><div class="modal-content"><h4>(problems/2017_annals_pub_msre_compare/4group.i)</h4><pre class="moose-pre"><code class="language-text">flow_velocity = 21.7 # cm/s. See MSRE-properties.ods
nt_scale = 1e13
ini_temp = 922
diri_temp = 922
gamma_frac = .075
R = 73
H = 162.56

[GlobalParams]
  num_groups = 4
  num_precursor_groups = 6
  use_exp_form = false
  group_fluxes = &#x27;group1 group2 group3 group4&#x27;
  temperature = temp
  sss2_input = true
  pre_concs = &#x27;pre1 pre2 pre3 pre4 pre5 pre6&#x27;
  account_delayed = true
  nt_scale = ${nt_scale}
[]

[Mesh]
  coord_type = RZ
  file = &#x27;2d_lattice_structured.msh&#x27;
[]

[Variables]
  [temp]
    initial_condition = ${ini_temp}
    scaling = 1e-4
  []
[]

[AuxVariables]
  [power_density]
    order = CONSTANT
    family = MONOMIAL
  []
[]

[Precursors]
  [pres]
    var_name_base = pre
    block = &#x27;fuel&#x27;
    outlet_boundaries = &#x27;fuel_tops&#x27;
    u_def = 0
    v_def = ${flow_velocity}
    w_def = 0
    nt_exp_form = false
    loop_precursors = false
    family = MONOMIAL
    order = CONSTANT
    # jac_test = true
  []
[]

[Nt]
  var_name_base = group
  vacuum_boundaries = &#x27;fuel_bottoms fuel_tops moder_bottoms moder_tops outer_wall&#x27;
  create_temperature_var = false
  scaling = 1e-4
  pre_blocks = &#x27;fuel&#x27;
[]

[Kernels]
  # Temperature
  [temp_time_derivative]
    type = MatINSTemperatureTimeDerivative
    variable = temp
  []
  [temp_source_fuel]
    type = TransientFissionHeatSource
    variable = temp
    block = &#x27;fuel&#x27;
  []
  [temp_source_mod]
    type = GammaHeatSource
    variable = temp
    block = &#x27;moder&#x27;
    average_fission_heat = &#x27;average_fission_heat&#x27;
    gamma = gamma_func
  []
  [temp_diffusion]
    type = MatDiffusion
    diffusivity = &#x27;k&#x27;
    variable = temp
  []
  [temp_advection_fuel]
    type = ConservativeTemperatureAdvection
    velocity = &#x27;0 ${flow_velocity} 0&#x27;
    variable = temp
    block = &#x27;fuel&#x27;
  []
[]

[BCs]
  [temp_diri_cg]
    boundary = &#x27;fuel_bottoms outer_wall&#x27;
    type = FlexiblePostprocessorDirichletBC
    postprocessor = coreEndTemp
    offset = -27.8
    variable = temp
  []
  # [./temp_diri_cg]
  #   boundary = &#x27;moder_bottoms fuel_bottoms outer_wall&#x27;
  #   type = FunctionDirichletBC
  #   function = &#x27;temp_bc_func&#x27;
  #   variable = temp
  # [../]
  [temp_advection_outlet]
    boundary = &#x27;fuel_tops&#x27;
    type = TemperatureOutflowBC
    variable = temp
    velocity = &#x27;0 ${flow_velocity} 0&#x27;
  []
[]

[AuxKernels]
  [fuel]
    block = &#x27;fuel&#x27;
    type = FissionHeatSourceTransientAux
    variable = power_density
  []
  [moderator]
    block = &#x27;moder&#x27;
    type = ModeratorHeatSourceTransientAux
    average_fission_heat = &#x27;average_fission_heat&#x27;
    variable = power_density
    gamma = gamma_func
  []
[]

[Functions]
  [temp_bc_func]
    type = ParsedFunction
    expression = &#x27;${ini_temp} - (${ini_temp} - ${diri_temp}) * tanh(t/1e-2)&#x27;
  []
  [gamma_func]
    type = ParsedFunction
    expression = &#x27;${gamma_frac} * pi^2 / 4 * cos(pi * x / (2. * ${R})) * sin(pi * y / ${H})&#x27;
  []
[]

[Materials]
  [fuel]
    type = GenericMoltresMaterial
    property_tables_root = &#x27;../../tutorial/step01_groupConstants/MSREProperties/msre_gentry_4g_fuel_rod0_&#x27;
    interp_type = &#x27;spline&#x27;
    block = &#x27;fuel&#x27;
    prop_names = &#x27;k cp&#x27;
    prop_values = &#x27;.0553 1967&#x27; # Robertson MSRE technical report @ 922 K
    controller_gain = 0
  []
  [rho_fuel]
    type = DerivativeParsedMaterial
    property_name = rho
    expression = &#x27;2.146e-3 * exp(-1.8 * 1.18e-4 * (temp - 922))&#x27;
    coupled_variables = &#x27;temp&#x27;
    derivative_order = 1
    block = &#x27;fuel&#x27;
  []
  [moder]
    type = GenericMoltresMaterial
    property_tables_root = &#x27;../../tutorial/step01_groupConstants/MSREProperties/msre_gentry_4g_moder_rod0_&#x27;
    interp_type = &#x27;spline&#x27;
    prop_names = &#x27;k cp&#x27;
    prop_values = &#x27;.312 1760&#x27; # Cammi 2011 at 908 K
    block = &#x27;moder&#x27;
    controller_gain = 0
  []
  [rho_moder]
    type = DerivativeParsedMaterial
    property_name = rho
    expression = &#x27;1.86e-3 * exp(-1.8 * 1.0e-5 * (temp - 922))&#x27;
    coupled_variables = &#x27;temp&#x27;
    derivative_order = 1
    block = &#x27;moder&#x27;
  []
[]

[Executioner]
  type = Transient
  end_time = 10000

  nl_rel_tol = 1e-6
  nl_abs_tol = 6e-6

  solve_type = &#x27;PJFNK&#x27;
  line_search = none
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason -snes_linesearch_monitor&#x27;
  petsc_options_iname = &#x27;-pc_type&#x27;
  petsc_options_value = &#x27;lu&#x27;

  nl_max_its = 30
  l_max_its = 100

  dtmin = 1e-5
  [TimeStepper]
    type = PostprocessorDT
    postprocessor = limit_k
    dt = 1e-3
  []
[]

[Preconditioning]
  [SMP]
    type = SMP
    full = true
  []
[]

[Postprocessors]
  [group1_current]
    type = IntegralNewVariablePostprocessor
    variable = group1
    outputs = &#x27;console csv&#x27;
  []
  [group1_old]
    type = IntegralOldVariablePostprocessor
    variable = group1
    outputs = &#x27;console csv&#x27;
  []
  [multiplication]
    type = DivisionPostprocessor
    value1 = group1_current
    value2 = group1_old
    outputs = &#x27;console csv&#x27;
  []
  [temp_fuel]
    type = ElementAverageValue
    variable = temp
    block = &#x27;fuel&#x27;
    outputs = &#x27;csv console&#x27;
  []
  [temp_moder]
    type = ElementAverageValue
    variable = temp
    block = &#x27;moder&#x27;
    outputs = &#x27;csv console&#x27;
  []
  [average_fission_heat]
    type = AverageFissionHeat
    execute_on = &#x27;linear nonlinear&#x27;
    outputs = &#x27;csv console&#x27;
    block = &#x27;fuel&#x27;
  []
  [coreEndTemp]
    type = SideAverageValue
    variable = temp
    boundary = &#x27;fuel_tops&#x27;
    outputs = &#x27;csv console&#x27;
    execute_on = &#x27;linear nonlinear&#x27;
  []
  [limit_k]
    type = LimitK
    execute_on = &#x27;timestep_end&#x27;
    k_postprocessor = multiplication
    growth_factor = 1.2
    cutback_factor = .4
    k_threshold = 1.5
  []
[]

[Outputs]
  perf_graph = true
  print_linear_residuals = true
  csv = true
  exodus = true
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="moose-modal modal" id="f7156758-93f9-4c8b-a160-f4bde02a6f0e"><div class="modal-content"><h4>(problems/publication_level_cases/twod_control_rod_yank/rodded.i)</h4><pre class="moose-pre"><code class="language-text">flow_velocity=21.7 # cm/s. See MSRE-properties.ods
nt_scale=1e13
ini_temp=922
diri_temp=922

[GlobalParams]
  num_groups = 4
  num_precursor_groups = 6
  use_exp_form = false
  group_fluxes = &#x27;group1 group2 group3 group4&#x27;
  temperature = temp
  sss2_input = true
  pre_concs = &#x27;pre1 pre2 pre3 pre4 pre5 pre6&#x27;
  account_delayed = true
[]

[Mesh]
  file = &#x27;2d_rodded_lattice.msh&#x27;
[../]

[Problem]
  coord_type = RZ
  kernel_coverage_check = false
[]

[Variables]
  [./temp]
    initial_condition = ${ini_temp}
    scaling = 1e-4
  [../]
  [./rodPosition]
    family = SCALAR
    order = FIRST
    initial_condition = 0.0
  [../]
[]

[Precursors]
  [./pres]
    var_name_base = pre
    block = &#x27;fuel&#x27;
    outlet_boundaries = &#x27;fuel_tops&#x27;
    u_def = 0
    v_def = ${flow_velocity}
    w_def = 0
    nt_exp_form = false
    family = MONOMIAL
    order = CONSTANT
    # jac_test = true
  [../]
[]

[Nt]
  var_name_base = group
  vacuum_boundaries = &#x27;fuel_bottoms fuel_tops moder_bottoms moder_tops outer_wall cRod_top cRod_bot&#x27;
  create_temperature_var = false
[]

[Kernels]
  # Temperature
  [./temp_time_derivative]
    type = MatINSTemperatureTimeDerivative
    variable = temp
  [../]
  [./temp_source_fuel]
    type = TransientFissionHeatSource
    variable = temp
    nt_scale=${nt_scale}
    block = &#x27;fuel&#x27;
  [../]
  [./temp_source_mod]
    type = GammaHeatSource
    variable = temp
    gamma = .0144 # Cammi .0144
    block = &#x27;moder&#x27;
    average_fission_heat = &#x27;average_fission_heat&#x27;
  [../]
  [./temp_diffusion]
    type = MatDiffusion
    diffusivity = &#x27;k&#x27;
    variable = temp
  [../]
  [./temp_advection_fuel]
    type = ConservativeTemperatureAdvection
    velocity = &#x27;0 ${flow_velocity} 0&#x27;
    variable = temp
    block = &#x27;fuel&#x27;
  [../]
[]

[ScalarKernels]
  [./tdRodPos]
    type = ODETimeDerivative
    variable = rodPosition
  [../]
  [./rodposForce]
    type = ParsedODEKernel
    function = &#x27;rodPosition - 100&#x27;
    variable = rodPosition
  [../]
[]

[BCs]
  [./temp_diri_cg]
    boundary = &#x27;moder_bottoms fuel_bottoms outer_wall&#x27;
    type = FunctionDirichletBC
    function = &#x27;temp_bc_func&#x27;
    variable = temp
  [../]
  [./temp_advection_outlet]
    boundary = &#x27;fuel_tops&#x27;
    type = TemperatureOutflowBC
    variable = temp
    velocity = &#x27;0 ${flow_velocity} 0&#x27;
  [../]
[]

[Functions]
  [./temp_bc_func]
    type = ParsedFunction
    value = &#x27;${ini_temp} - (${ini_temp} - ${diri_temp}) * tanh(t/1e-2)&#x27;
  [../]
[]

[Materials]
  [./fuel]
    type = GenericMoltresMaterial
    property_tables_root = &#x27;../../../tutorial/step01_groupConstants/MSREProperties/msre_gentry_4gfuel_&#x27;
    interp_type = &#x27;spline&#x27;
    block = &#x27;fuel&#x27;
    prop_names = &#x27;k cp&#x27;
    prop_values = &#x27;.0553 1967&#x27; # Robertson MSRE technical report @ 922 K
  [../]
  [./rho_fuel]
    type = DerivativeParsedMaterial
    f_name = rho
    function = &#x27;2.146e-3 * exp(-1.8 * 1.18e-4 * (temp - 922))&#x27;
    args = &#x27;temp&#x27;
    derivative_order = 1
    block = &#x27;fuel&#x27;
  [../]
  [./moder]
    type = GenericMoltresMaterial
    property_tables_root = &#x27;../../../tutorial/step01_groupConstants/MSREProperties/msre_gentry_4gmoder_&#x27;
    interp_type = &#x27;spline&#x27;
    prop_names = &#x27;k cp&#x27;
    prop_values = &#x27;.312 1760&#x27; # Cammi 2011 at 908 K
    block = &#x27;moder&#x27;
  [../]
  [./rho_moder]
    type = DerivativeParsedMaterial
    f_name = rho
    function = &#x27;1.86e-3 * exp(-1.8 * 1.0e-5 * (temp - 922))&#x27;
    args = &#x27;temp&#x27;
    derivative_order = 1
    block = &#x27;moder&#x27;
  [../]
  [./cRod]
    type = RoddedMaterial
    property_tables_root = &#x27;../../tutorial/step01_groupConstants/MSREProperties/msre_gentry_4gmoder_&#x27;
    interp_type = &#x27;spline&#x27;
    prop_names = &#x27;k cp&#x27;
    prop_values = &#x27;.312 1760&#x27; # Cammi 2011 at 908 K
    block = &#x27;cRod&#x27;
    rodDimension = &#x27;y&#x27;
    rodPosition = rodPosition
    absorb_factor = 1e6 # how much more absorbing than usual in absorbing region?
  [../]
  [./rho_crod]
    type = DerivativeParsedMaterial
    f_name = rho
    function = &#x27;1.86e-3 * exp(-1.8 * 1.0e-5 * (temp - 922))&#x27;
    args = &#x27;temp&#x27;
    derivative_order = 1
    block = &#x27;cRod&#x27;
  [../]

[]

[Executioner]
  type = Transient
  end_time = 10000

  nl_rel_tol = 1e-6
  nl_abs_tol = 1e-6

  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason -snes_linesearch_monitor&#x27;
  solve_type = &#x27;PJFNK&#x27;
  petsc_options_iname = &#x27;-pc_type&#x27;
  petsc_options_value = &#x27;lu&#x27;
  line_search = &#x27;none&#x27;

  nl_max_its = 30
  l_max_its = 100
  [./TimeStepper]
    type = PostprocessorDT
    postprocessor = limit_k
    dt = 0.1
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
    # ksp_norm = none
  [../]
[]

[Postprocessors]
  [./group1_current]
    type = IntegralNewVariablePostprocessor
    variable = group1
    outputs = &#x27;console csv&#x27;
  [../]
  [./group1_old]
    type = IntegralOldVariablePostprocessor
    variable = group1
    outputs = &#x27;console csv&#x27;
  [../]
  [./multiplication]
    type = DivisionPostprocessor
    value1 = group1_current
    value2 = group1_old
    outputs = &#x27;console csv&#x27;
  [../]
  [./temp_fuel]
    type = ElementAverageValue
    variable = temp
    block = &#x27;fuel&#x27;
    outputs = &#x27;csv console&#x27;
  [../]
  [./temp_moder]
    type = ElementAverageValue
    variable = temp
    block = &#x27;moder&#x27;
    outputs = &#x27;csv console&#x27;
  [../]
  [./average_fission_heat]
     type = AverageFissionHeat
     nt_scale = ${nt_scale}
     execute_on = &#x27;linear nonlinear&#x27;
     outputs = &#x27;console&#x27;
     block = &#x27;fuel&#x27;
  [../]
  [./limit_k]
    type = LimitK
    execute_on = &#x27;timestep_end&#x27;
    k_postprocessor = multiplication
    growth_factor = 1.2
    cutback_factor = .4
    k_threshold = 1.5
  [../]
[]

[Outputs]
  perf_graph = true
  print_linear_residuals = true
  csv = true
  exodus = true
  execute_on = &#x27;timestep_end final&#x27;
  file_base = &#x27;out&#x27;
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div></div><div class="col hide-on-med-and-down l2"><div class="toc-wrapper pin-top"><ul class="section table-of-contents"><li><a href="#4f23db44-ef80-4fbe-8f34-7c62532adfe2" class="tooltipped" data-position="left" data-tooltip="Overview">Overview</a></li><li><a href="#418f7ddd-2947-4b21-b2cb-99da2f4e5c7d" class="tooltipped" data-position="left" data-tooltip="Example Input File Syntax">Example Input File Syntax</a></li><li><a href="#7183f902-c7b0-47d0-be7f-a4856c8785ec" class="tooltipped" data-position="left" data-tooltip="Input Parameters">Input Parameters</a></li><li><a href="#8ebfbf42-67d7-43de-9245-e67283248aaa" class="tooltipped" data-position="left" data-tooltip="Input Files">Input Files</a></li></ul></div></div></div></div></main></div></body><script type="text/javascript" src="../../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../../js/init.js"></script><script type="text/javascript" src="../../js/navigation.js"></script><script type="text/javascript" src="../../contrib/fuse/fuse.min.js"></script><script type="text/javascript" src="../../js/search_index.js"></script><script type="text/javascript" src="../../js/sqa_moose.js"></script>